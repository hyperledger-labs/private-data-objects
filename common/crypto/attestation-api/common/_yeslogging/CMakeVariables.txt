# Copyright 2020 Intel Corporation
#
# SPDX-License-Identifier: Apache-2.0

include_guard()

SET(U_LOGGING_LIB_NAME ulogging)
SET(T_LOGGING_LIB_NAME tlogging)

# variables useful for a parent cmake using this module
SET(LOGGING_TRUSTED_INCLUDE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/trusted PARENT_SCOPE)
SET(LOGGING_UNTRUSTED_INCLUDE_PATH ${CMAKE_CURRENT_SOURCE_DIR}/untrusted PARENT_SCOPE)
SET(LOGGING_UNTRUSTED_LIB ${U_LOGGING_LIB_NAME} PARENT_SCOPE)
SET(LOGGING_TRUSTED_LIB ${T_LOGGING_LIB_NAME} PARENT_SCOPE)

# set LOGGING_FLAGS based on SGX_BUILD
if ("$ENV{SGX_BUILD}" STREQUAL "DEBUG")
    set(LOGGING_FLAGS "-DDO_DEBUG=true")
elseif("$ENV{SGX_BUILD}" STREQUAL "PRERELEASE")
    set(LOGGING_FLAGS "-DDO_DEBUG=false")
elseif("$ENV{SGX_BUILD}" STREQUAL "RELEASE")
    set(LOGGING_FLAGS "-DDO_DEBUG=false")
else()
    set(LOGGING_FLAGS "-DDO_DEBUG=false")
endif()

set(CMAKE_C_FLAGS "${CMAKE_C_FLAGS} ${LOGGING_FLAGS}")
set(CMAKE_CXX_FLAGS "${CMAKE_CXX_FLAGS} ${LOGGING_FLAGS}")

